<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd" >
<sqlMap namespace="project">
	<typeAlias alias="project" type="com.dreamup.dto.project.ProjectDTO" />

	<insert id="insertBasic" parameterClass="project">
		insert into
		project
		(pro_no,m_id,pro_thumbnail,pro_title,pro_catagory
		,pro_start,pro_end,pro_goal,pro_state)
		values
		(project_seq.nextval,#m_id#,#pro_thumbnail#,#pro_title#,#pro_catagory#,
		sysdate,#pro_end#,#pro_goal#,0)
	</insert>

	<update id="updateStory" parameterClass="project">
		update project set
		pro_video=#pro_video#,
		pro_content=#pro_content#,
		pro_link=#pro_link#
		where pro_no=#pro_no#  
	</update>

	<update id="updateProfile" parameterClass="project">
		update project set
		pro_imageUrl=#pro_imageUrl#,
		m_id=#m_id#,
		pro_intro=#pro_intro
		m_address=#select m_address from member where m_id=#m_id# ->여기
		pro_sns=#pro_sns#,
		m_phone=#select m_phone#
		where pro_no=#pro_no#
	</update>

	<update id="updateAccount" parameterClass="project">
		update project set
		pro_account=#pro_account#,
		where pro_no=#pro_no#
	</update>

	<delete id="deleteProject" parameterClass="int"> delete from project 
		where pro_no = #pro_no# </delete>

	<select id="selectProjectNo" parameterClass="int" resultClass="int">
		select pro_no from project where pro_no =#pro_no#
	</select>

	<select id="selectProject" parameterClass="int" resultClass="project">
		select * from project where pro_no = #pro_no#
	</select>

	<select id="selectNewProject" parameterClass="java.sql.Date"
		resultClass="project">
		select * from project where pro_start = sysdate
	</select>

	<select id="selectPopProject" parameterClass="int" resultClass="project">
		select * from project where su_count <![CDATA[<]]>
		#su_count#
	</select>

	<select id="selectCatagoryProject" parameterClass="int"
		resultClass="project">
		select * from project where pro_no =#pro_no#
	</select>

</sqlMap>
